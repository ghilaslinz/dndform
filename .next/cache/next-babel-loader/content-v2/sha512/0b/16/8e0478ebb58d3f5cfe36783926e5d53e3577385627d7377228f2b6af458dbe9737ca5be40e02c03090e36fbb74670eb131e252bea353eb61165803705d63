{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from \"react\";\nimport { ReactFormGenerator, ElementStore } from \"react-form-builder2\";\nimport { get, post } from \"../mongoose/requests\";\nexport default class Demobar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      previewVisible: false,\n      shortPreviewVisible: false,\n      roPreviewVisible: false\n    };\n    this.submit = this.onSubmit.bind(this);\n    const update = this.onChange.bind(this);\n    ElementStore.subscribe(state => update(state.data));\n  }\n\n  showPreview() {\n    this.setState({\n      previewVisible: true\n    });\n  }\n\n  showShortPreview() {\n    this.setState({\n      shortPreviewVisible: true\n    });\n  }\n\n  showRoPreview() {\n    this.setState({\n      roPreviewVisible: true\n    });\n  }\n\n  closePreview() {\n    this.setState({\n      previewVisible: false,\n      shortPreviewVisible: false,\n      roPreviewVisible: false\n    });\n  }\n\n  onChange(data) {\n    this.setState({\n      data\n    });\n  }\n\n  onSubmit(data) {\n    const {\n      postUrl\n    } = this.props;\n    console.log(\"onSubmit\", data); // Place code to post json data to server here\n\n    post(postUrl, data).then(x => {\n      window.location.href = \"/\";\n    });\n    return false;\n  }\n\n  render() {\n    let modalClass = \"modal\";\n\n    if (this.state.previewVisible) {\n      modalClass += \" show d-block\";\n    }\n\n    let shortModalClass = \"modal short-modal\";\n\n    if (this.state.shortPreviewVisible) {\n      shortModalClass += \" show d-block\";\n    }\n\n    let roModalClass = \"modal ro-modal\";\n\n    if (this.state.roPreviewVisible) {\n      roModalClass += \" show d-block\";\n    }\n\n    return /*#__PURE__*/_jsxs(\"div\", {\n      className: \"clearfix\",\n      style: {\n        margin: \"10px\",\n        width: \"70%\"\n      },\n      children: [/*#__PURE__*/_jsx(\"h4\", {\n        className: \"float-left\",\n        children: \"Preview\"\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: \"btn btn-primary float-right\",\n        style: {\n          marginRight: \"10px\"\n        },\n        onClick: this.showPreview.bind(this),\n        children: \"Preview Form\"\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: \"btn btn-default float-right\",\n        style: {\n          marginRight: \"10px\"\n        },\n        onClick: this.showShortPreview.bind(this),\n        children: \"Alternate/Short Form\"\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: \"btn btn-default float-right\",\n        style: {\n          marginRight: \"10px\"\n        },\n        onClick: this.showRoPreview.bind(this),\n        children: \"Read Only Form\"\n      }), this.state.previewVisible && /*#__PURE__*/_jsx(\"div\", {\n        className: modalClass,\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"modal-dialog modal-lg\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"modal-content\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"modal-body\",\n              children: /*#__PURE__*/_jsx(ReactFormGenerator, {\n                download_path: \"\",\n                back_action: \"/\",\n                back_name: \"Back\",\n                answer_data: {},\n                action_name: \"Save\",\n                form_action: \"/\",\n                form_method: \"POST\",\n                onSubmit: this.submit,\n                variables: this.props.variables,\n                data: this.state.data\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"modal-footer\",\n              children: /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"btn btn-default\",\n                \"data-dismiss\": \"modal\",\n                onClick: this.closePreview.bind(this),\n                children: \"Close\"\n              })\n            })]\n          })\n        })\n      }), this.state.roPreviewVisible && /*#__PURE__*/_jsx(\"div\", {\n        className: roModalClass,\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"modal-dialog modal-lg\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"modal-content\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"modal-body\",\n              children: /*#__PURE__*/_jsx(ReactFormGenerator, {\n                download_path: \"\",\n                back_action: \"/\",\n                back_name: \"Back\",\n                answer_data: {},\n                action_name: \"Save\",\n                form_action: \"/\",\n                form_method: \"POST\",\n                read_only: true,\n                variables: this.props.variables,\n                hide_actions: true,\n                data: this.state.data\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"modal-footer\",\n              children: /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"btn btn-default\",\n                \"data-dismiss\": \"modal\",\n                onClick: this.closePreview.bind(this),\n                children: \"Close\"\n              })\n            })]\n          })\n        })\n      }), this.state.shortPreviewVisible && /*#__PURE__*/_jsx(\"div\", {\n        className: shortModalClass,\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"modal-dialog modal-lg\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"modal-content\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"modal-body\",\n              children: /*#__PURE__*/_jsx(ReactFormGenerator, {\n                download_path: \"\",\n                back_action: \"\",\n                answer_data: {},\n                form_action: \"/\",\n                form_method: \"POST\",\n                data: this.state.data,\n                display_short: true,\n                variables: this.props.variables,\n                hide_actions: false\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"modal-footer\",\n              children: /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                className: \"btn btn-default\",\n                \"data-dismiss\": \"modal\",\n                onClick: this.closePreview.bind(this),\n                children: \"Close\"\n              })\n            })]\n          })\n        })\n      })]\n    });\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}