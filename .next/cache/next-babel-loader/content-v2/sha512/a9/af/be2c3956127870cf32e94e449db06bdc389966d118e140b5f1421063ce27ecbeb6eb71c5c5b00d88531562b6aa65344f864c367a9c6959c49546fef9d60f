{"ast":null,"code":"import dbconnect from \"../../../mongoose/mongoose\";\nimport graph from \"../../../mongoose/models/graph\";\nimport form from \"../../../mongoose/models/form\";\ndbconnect();\n\nconst getgraph = (data, id) => {\n  console.log(data);\n  const newdata = [];\n\n  for (let i = 0; i < data.length; i++) {\n    const tool = data[i];\n    graph.find({\n      formId: id,\n      ques: obj.label\n    }).exec((err, result) => {\n      newdata.push({\n        label: obj.label,\n        options: result\n      });\n    });\n  }\n};\n\nconst handlegraphshape = async (id, res) => {\n  const data = await form.find({\n    _id: id\n  }).exec();\n  return data;\n};\n\nexport default (async (req, res) => {\n  const {\n    method,\n    query\n  } = req;\n\n  switch (method) {\n    case \"GET\":\n      try {\n        const data = await handlegraphshape(query.id);\n        const da = getgraph(data, query.id);\n      } catch (error) {\n        console.log(\"err\", error);\n        res.status(404).json({\n          sucees: false\n        });\n      }\n\n      break;\n\n    default:\n      break;\n  }\n});","map":{"version":3,"sources":["D:/upwork projects/New folder (4)/form-projet-finale/pages/api/findgraph/[id].js"],"names":["dbconnect","graph","form","getgraph","data","id","console","log","newdata","i","length","tool","find","formId","ques","obj","label","exec","err","result","push","options","handlegraphshape","res","_id","req","method","query","da","error","status","json","sucees"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,4BAAtB;AACA,OAAOC,KAAP,MAAkB,gCAAlB;AACA,OAAOC,IAAP,MAAiB,+BAAjB;AACAF,SAAS;;AAET,MAAMG,QAAQ,GAAG,CAACC,IAAD,EAAOC,EAAP,KAAc;AAC9BC,EAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACA,QAAMI,OAAO,GAAG,EAAhB;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,IAAI,CAACM,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACrC,UAAME,IAAI,GAAGP,IAAI,CAACK,CAAD,CAAjB;AACAR,IAAAA,KAAK,CAACW,IAAN,CAAW;AAAEC,MAAAA,MAAM,EAAER,EAAV;AAAcS,MAAAA,IAAI,EAAEC,GAAG,CAACC;AAAxB,KAAX,EAA4CC,IAA5C,CAAiD,CAACC,GAAD,EAAMC,MAAN,KAAiB;AACjEX,MAAAA,OAAO,CAACY,IAAR,CAAa;AAAEJ,QAAAA,KAAK,EAAED,GAAG,CAACC,KAAb;AAAoBK,QAAAA,OAAO,EAAEF;AAA7B,OAAb;AACA,KAFD;AAGA;AACD,CATD;;AAWA,MAAMG,gBAAgB,GAAG,OAAOjB,EAAP,EAAWkB,GAAX,KAAmB;AAC3C,QAAMnB,IAAI,GAAG,MAAMF,IAAI,CAACU,IAAL,CAAU;AAAEY,IAAAA,GAAG,EAAEnB;AAAP,GAAV,EAAuBY,IAAvB,EAAnB;AAEA,SAAOb,IAAP;AACA,CAJD;;AAMA,gBAAe,OAAOqB,GAAP,EAAYF,GAAZ,KAAoB;AAClC,QAAM;AAAEG,IAAAA,MAAF;AAAUC,IAAAA;AAAV,MAAoBF,GAA1B;;AACA,UAAQC,MAAR;AACC,SAAK,KAAL;AACC,UAAI;AACH,cAAMtB,IAAI,GAAG,MAAMkB,gBAAgB,CAACK,KAAK,CAACtB,EAAP,CAAnC;AACA,cAAMuB,EAAE,GAAGzB,QAAQ,CAACC,IAAD,EAAOuB,KAAK,CAACtB,EAAb,CAAnB;AACA,OAHD,CAGE,OAAOwB,KAAP,EAAc;AACfvB,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBsB,KAAnB;AACAN,QAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,UAAAA,MAAM,EAAE;AAAV,SAArB;AACA;;AACD;;AAED;AACC;AAZF;AAcA,CAhBD","sourcesContent":["import dbconnect from \"../../../mongoose/mongoose\";\r\nimport graph from \"../../../mongoose/models/graph\";\r\nimport form from \"../../../mongoose/models/form\";\r\ndbconnect();\r\n\r\nconst getgraph = (data, id) => {\r\n\tconsole.log(data);\r\n\tconst newdata = [];\r\n\tfor (let i = 0; i < data.length; i++) {\r\n\t\tconst tool = data[i];\r\n\t\tgraph.find({ formId: id, ques: obj.label }).exec((err, result) => {\r\n\t\t\tnewdata.push({ label: obj.label, options: result });\r\n\t\t});\r\n\t}\r\n};\r\n\r\nconst handlegraphshape = async (id, res) => {\r\n\tconst data = await form.find({ _id: id }).exec();\r\n\r\n\treturn data;\r\n};\r\n\r\nexport default async (req, res) => {\r\n\tconst { method, query } = req;\r\n\tswitch (method) {\r\n\t\tcase \"GET\":\r\n\t\t\ttry {\r\n\t\t\t\tconst data = await handlegraphshape(query.id);\r\n\t\t\t\tconst da = getgraph(data, query.id);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(\"err\", error);\r\n\t\t\t\tres.status(404).json({ sucees: false });\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n};\r\n"]},"metadata":{},"sourceType":"module"}